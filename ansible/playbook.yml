---

- hosts: localhost
  tasks:
    - file:
        path: private
        mode: 0700
        state: directory

- hosts: all
  tasks:
    - apt:
        update_cache: yes

- hosts: tag_group_prometheus
  roles:
    - role: prometheus/node_exporter
    - role: prometheus/server
      vars:
        host_group:
          - tag_group_prometheus
          - tag_group_grafana
          - tag_group_theia_ide

- hosts: tag_group_grafana
  roles:
    - role: prometheus/node_exporter
    - role: grafana

- hosts: tag_group_theia_ide
  roles:
    - role: prometheus/node_exporter
    - role: theia-ide
